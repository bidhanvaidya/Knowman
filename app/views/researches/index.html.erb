<script>
	$(function() {
		$( "#draggable" ).draggable();
	});
	$.fx.speeds._default = 1000;
	$(function() {
		$( "#dialog" ).dialog({
			autoOpen: false,
			show: "blind",
			hide: "explode"
		});

		$( "#opener" ).click(function() {
			$( "#dialog" ).dialog( "open" );
			return false;
		});
	});

	</script>
	
<h1 align ="center"">Research</h1>

<table ><td valign = "top">
<table width= "40" >
<tr ><div id = "dialog">
<%= render :file => 'researches/new.html.erb' %>
<br />
</div></tr>
  <tr>
    <th>Title <%= will_paginate @researches %></th>
   
<button id="opener">Create New</button>
  </tr>
  
								

<% @researches.each do |research| %>
  <tr>
    <td><%= link_to research.title, research_folders_path(research) %></td>
  </tr>
<% end %>
</table></td><td valign ="top">
<table >
<th>
Documents that needs more work on it 
	
</th><% @topics.each do |topic|%>
<tr ><td><%= topic.title %> </td>
<td><%= topic.progress %></td>
<script>
												$(function() {
												$( "#<%=topic.created_at.hash%>" ).progressbar({
													value: <%=topic.progress%>});
														 var value = <%=topic.progress%>
													if (value <20){
															$("#<%=topic.created_at.hash%>").css({ 'background': 'white' });
															$("#<%=topic.created_at.hash%> > div").css({ 'background': 'red' });}
													
												  else if (value <50){
															$("#<%=topic.created_at.hash%>").css({ 'background': 'white' });
															$("#<%=topic.created_at.hash%> > div").css({ 'background': 'orange' });}
													else if (value <70){
															$("#<%=topic.created_at.hash%>").css({ 'background': 'white' });
															$("#<%=topic.created_at.hash%> > div").css({ 'background': 'lightblue' });}
													else{
															$("#<%=topic.created_at.hash%>").css({ 'background': 'white' });
															$("#<%=topic.created_at.hash%> > div").css({ 'background': 'lightgreen' });
													}
												});</script>
												<td><div id="<%=topic.created_at.hash%>"></div></td>
</tr>
<%end%>
</table>
</td>
<td valign = "top" align = "right"><table align ="right"><tr >
Documents that need review </br></tr>
<% @notifications.each do |notify| %>
<tr >
<th align = "right" ><%= notify.topic.title %></th>
<% days_left = (notify.next_notification - Time.now)/(3600*24)  %>
<th width = "100"><table ><tr><th valign = "top"><h1><%= days_left.to_i + 1  %></h1></th><th valign = "bottom"> <h6> days left</h6></td></tr></th></table>
</tr>
<%end %>
</table>
</td>
</table>
<br>

